<luc-titlebar
  *ngIf="(systemService.isMac$ | async)"
></luc-titlebar>

<uni-tab-group
  *ngIf="fileService.files$ | async; let files"
>
  <uni-tab *ngFor="let path of fileService.paths$ | async">
    <ng-template uniTabLabel>
      <span>{{ files[path]?.name }}</span>
    </ng-template>

    <ng-template uniTabBody>
      <uni-vertical-split>
        <uni-split-area [(flex)]="flex.left" [uniContextMenu]="ctxMenuTpl">
          <luc-json-editor [ngModel]="files[path]?.text" (ngModelChange)="onTextChange($event, path)"></luc-json-editor>
        </uni-split-area>
        <uni-split-area [(flex)]="flex.right">
          <uni-scroll>
            <uni-json-tree [json]="files[path]?.json"></uni-json-tree>
          </uni-scroll>
        </uni-split-area>
      </uni-vertical-split>
    </ng-template>
  </uni-tab>
</uni-tab-group>

<luc-actionbar></luc-actionbar>

<ng-template #ctxMenuTpl>
  <uni-option (click)="onViewTree()">View Tree</uni-option>
</ng-template>
